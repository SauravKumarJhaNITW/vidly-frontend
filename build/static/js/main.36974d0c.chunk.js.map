{"version":3,"sources":["services/httpService.js","services/logService.js","services/movieService.js","components/common/pagination.jsx","utils/paginate.js","components/common/listGroup.jsx","services/genreService.js","components/common/like.jsx","components/common/tableHeader.jsx","components/common/tableBody.jsx","components/common/table.jsx","services/authService.js","components/moviesTable.jsx","components/common/searchBar.jsx","components/movies.jsx","components/common/navBar.jsx","components/customers.jsx","components/rentals.jsx","components/common/notFound.jsx","components/common/input.jsx","components/common/select.jsx","components/common/form.jsx","components/movieForm.jsx","components/loginForm.jsx","services/userService.js","components/registerForm.jsx","components/logout.jsx","components/profile.jsx","components/common/protectedRoute.jsx","App.js","reportWebVitals.js","index.js"],"names":["axios","defaults","baseURL","process","interceptors","response","use","error","status","Raven","captureException","log","toast","Promise","reject","http","get","post","delete","put","setJwt","jwt","headers","common","apiEndpoint","getMovies","a","movies","data","getMovie","id","movie","saveMovie","_id","body","deleteMovie","Pagination","itemsCount","pageSize","onPageChange","currentPage","pagesCount","Math","ceil","pages","_","range","className","map","page","onClick","paginate","items","pageNumber","startIndex","slice","ListGroup","textProperty","valueProperty","selectedItem","onItemSelect","classes","item","defaultProps","getGenres","genres","Like","props","liked","style","cursor","aria-hidden","TableHeader","raiseSort","path","sortColumn","order","onSort","renderSortIcon","column","this","columns","label","key","Component","TableBody","renderCell","content","createKey","Table","searchValue","tokenKey","login","user","email","username","password","localStorage","setItem","getCurrentUser","getItem","jwtDecode","ex","MoviesTable","to","title","onLike","deleteColumn","onDelete","isAdmin","push","SearchBox","value","onSearch","onChange","e","currentTarget","type","name","placeholder","Movies","state","selectedGenre","searchQuery","handleDelete","originalMovies","filter","m","setState","handleLike","ind","indexOf","handlePageChange","handleGenreSelect","genre","console","handleSort","handleSearch","getPagedData","allMovies","filtered","toLowerCase","startsWith","orderBy","totalCount","length","res","NavBar","data-toggle","data-target","aria-controls","aria-expanded","aria-label","Fragment","Customers","Rentals","NotFound","Input","rest","htmlFor","Select","Form","errors","validate","Joi","schema","abortEarly","details","message","validateProperty","obj","handleSubmit","preventDefault","doSubmit","handleInputChange","input","errorMessage","disabled","MovieForm","genreId","numberInStock","dailyRentalRate","string","required","number","min","max","history","movieId","match","params","mapToViewModel","replace","populateGenre","populateMovie","onSubmit","renderInput","renderSelect","renderButton","LoginForm","location","window","from","pathname","register","RegisterForm","userService","Logout","removeItem","Profile","ProtectedRoute","component","render","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","config","release","environment","install","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.36974d0c.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { log } from \"./logService\";\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.response.use(null, (error) => {\r\n  const expectedError =\r\n    error.response &&\r\n    error.response.status >= 400 &&\r\n    error.response.status < 500;\r\n\r\n  if (!expectedError) {\r\n    log(error);\r\n    toast.error(\"an unexpected error occured\");\r\n  }\r\n  return Promise.reject(error);\r\n});\r\n\r\nfunction setJwt(jwt) {\r\n  axios.defaults.headers.common[\"x-auth-token\"] = jwt;\r\n}\r\n\r\nconst http = {\r\n  get: axios.get,\r\n  post: axios.post,\r\n  delete: axios.delete,\r\n  put: axios.put,\r\n  setJwt,\r\n};\r\nexport default http;\r\n","import Raven from \"raven-js\";\r\n\r\nexport function init() {\r\n  Raven.config(\r\n    \"https://6b75613687d94cbb9b6e81cc6bbf6854@o914975.ingest.sentry.io/5854642\",\r\n    {\r\n      release: \"1-0-0\",\r\n      environment: \"developement-test\",\r\n    }\r\n  ).install();\r\n}\r\n\r\nexport function log(error) {\r\n  Raven.captureException(error);\r\n}\r\n","import http from \"./httpService\";\n\nconst apiEndpoint = \"/movies/\";\n\nexport async function getMovies() {\n  const { data: movies } = await http.get(apiEndpoint);\n  return movies;\n}\n\nexport async function getMovie(id) {\n  const { data: movie } = await http.get(apiEndpoint + id);\n  return movie;\n}\n\nexport async function saveMovie(movie) {\n  if (!movie._id) {\n    const { data } = await http.post(apiEndpoint, movie);\n    return data;\n  } else {\n    const body = { ...movie };\n    delete body._id;\n    const { data } = await http.put(apiEndpoint + movie._id, body);\n    return data;\n  }\n}\n\nexport async function deleteMovie(id) {\n  const { data } = await http.delete(apiEndpoint + id);\n  return data;\n}\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Pagination = ({ itemsCount, pageSize, onPageChange, currentPage }) => {\r\n  const pagesCount = Math.ceil(itemsCount / pageSize);\r\n  if (pagesCount === 1) return null;\r\n  const pages = _.range(1, pagesCount + 1);\r\n  return (\r\n    <nav>\r\n      <ul className=\"pagination\">\r\n        {pages.map((page) => (\r\n          <li\r\n            key={page}\r\n            onClick={() => onPageChange(page)}\r\n            className={page === currentPage ? \"page-item active\" : \"page-item\"}\r\n          >\r\n            <button className=\"page-link\">{page}</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nPagination.propTypes = {\r\n  itemsCount: PropTypes.number.isRequired,\r\n  pageSize: PropTypes.number.isRequired,\r\n  onPageChange: PropTypes.func.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Pagination;\r\n","export function paginate(items, pageNumber, pageSize) {\r\n  const startIndex = (pageNumber - 1) * pageSize;\r\n  return items.slice(startIndex, startIndex + pageSize);\r\n}\r\n","import React from \"react\";\r\n\r\nconst ListGroup = ({\r\n  items,\r\n  textProperty,\r\n  valueProperty,\r\n  selectedItem,\r\n  onItemSelect,\r\n}) => {\r\n  let classes = \"list-group-item list-group-item-action \";\r\n  return (\r\n    <ul className=\"list-group\">\r\n      {items.map((item) => (\r\n        <li\r\n          key={item[valueProperty]}\r\n          onClick={() => onItemSelect(item)}\r\n          className={item === selectedItem ? classes + \"active\" : classes}\r\n        >\r\n          {item[textProperty]}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nListGroup.defaultProps = {\r\n  textProperty: \"name\",\r\n  valueProperty: \"_id\",\r\n};\r\n\r\nexport default ListGroup;\r\n","import http from \"./httpService\";\r\n\r\nconst apiEndpoint = \"/genres\";\r\n\r\nexport async function getGenres() {\r\n  const { data: genres } = await http.get(apiEndpoint);\r\n  return genres;\r\n}\r\n","import React from \"react\";\r\n\r\nconst Like = (props) => {\r\n  let classes = \"fa fa-heart\";\r\n  if (!props.liked) classes += \"-o\";\r\n  return (\r\n    <i\r\n      onClick={props.onClick}\r\n      style={{ cursor: \"pointer\" }}\r\n      className={classes}\r\n      aria-hidden=\"true\"\r\n    ></i>\r\n  );\r\n};\r\n\r\nexport default Like;\r\n","import React, { Component } from \"react\";\r\n\r\nclass TableHeader extends Component {\r\n  raiseSort = (path) => {\r\n    const sortColumn = { ...this.props.sortColumn };\r\n    if (sortColumn.path === path)\r\n      sortColumn.order = sortColumn.order === \"asc\" ? \"desc\" : \"asc\";\r\n    else {\r\n      sortColumn.path = path;\r\n      sortColumn.order = \"asc\";\r\n    }\r\n    this.props.onSort(sortColumn);\r\n  };\r\n\r\n  renderSortIcon = (column) => {\r\n    const { sortColumn } = this.props;\r\n    if (column.path !== sortColumn.path) return null;\r\n    if (sortColumn.order === \"asc\") return <i className=\"fa fa-sort-asc\"></i>;\r\n    return <i className=\"fa fa-sort-desc\"></i>;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <thead>\r\n        <tr>\r\n          {this.props.columns.map((column) => (\r\n            <th\r\n              className=\"clickable\"\r\n              key={column.path || column.key}\r\n              onClick={() => {\r\n                column.path && this.raiseSort(column.path);\r\n              }}\r\n            >\r\n              {column.label} {this.renderSortIcon(column)}\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TableHeader;\r\n","import React, { Component } from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nclass TableBody extends Component {\r\n  renderCell = (item, column) => {\r\n    if (column.content) return column.content(item);\r\n    return _.get(item, column.path);\r\n  };\r\n\r\n  createKey = (item, column) => {\r\n    return item._id + (column.path || column.key);\r\n  };\r\n\r\n  render() {\r\n    const { items, columns } = this.props;\r\n    return (\r\n      <tbody>\r\n        {items.map((item) => (\r\n          <tr key={item._id}>\r\n            {columns.map((column) => (\r\n              <td key={this.createKey(item, column)}>\r\n                {this.renderCell(item, column)}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TableBody;\r\n","import React from \"react\";\r\nimport TableHeader from \"./tableHeader\";\r\nimport TableBody from \"./tableBody\";\r\n\r\nconst Table = ({ columns, sortColumn, onSort, items, searchValue }) => {\r\n  return (\r\n    <table className=\"table\">\r\n      <TableHeader columns={columns} sortColumn={sortColumn} onSort={onSort} />\r\n      <TableBody items={items} columns={columns} />\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import jwtDecode from \"jwt-decode\";\r\nimport http from \"./httpService\";\r\n\r\nconst apiEndpoint = \"/auth\";\r\nconst tokenKey = \"token\";\r\n\r\nhttp.setJwt(getJwt());\r\n\r\nexport async function login(user) {\r\n  const { data: jwt } = await http.post(apiEndpoint, {\r\n    email: user.username,\r\n    password: user.password,\r\n  });\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport function getJwt() {\r\n  return localStorage.getItem(tokenKey);\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(tokenKey);\r\n}\r\n\r\nexport function getCurrentUser() {\r\n  try {\r\n    const jwt = localStorage.getItem(tokenKey);\r\n    const user = jwtDecode(jwt);\r\n    return user;\r\n  } catch (ex) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function loginWithJwt(jwt) {\r\n  localStorage.setItem(tokenKey, jwt);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Like from \"./common/like\";\r\nimport Table from \"./common/table\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCurrentUser } from \"../services/authService\";\r\n\r\nclass MoviesTable extends Component {\r\n  columns = [\r\n    {\r\n      label: \"Title\",\r\n      path: \"title\",\r\n      content: (movie) => (\r\n        <Link to={`/movies/${movie._id}`}>{movie.title}</Link>\r\n      ),\r\n    },\r\n    { label: \"Genre\", path: \"genre.name\" },\r\n    { label: \"Stock\", path: \"numberInStock\" },\r\n    { label: \"Rate\", path: \"dailyRentalRate\" },\r\n    {\r\n      key: \"like\",\r\n      content: (movie) => (\r\n        <Like liked={movie.liked} onClick={() => this.props.onLike(movie)} />\r\n      ),\r\n    },\r\n  ];\r\n\r\n  deleteColumn = {\r\n    key: \"delete\",\r\n    content: (movie) => (\r\n      <button\r\n        onClick={() => this.props.onDelete(movie)}\r\n        className=\"btn btn-danger btn-sm\"\r\n      >\r\n        Delete\r\n      </button>\r\n    ),\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    const user = getCurrentUser();\r\n    if (user && user.isAdmin) this.columns.push(this.deleteColumn);\r\n  }\r\n\r\n  render() {\r\n    const { movies, sortColumn, onSort } = this.props;\r\n\r\n    return (\r\n      <Table\r\n        columns={this.columns}\r\n        sortColumn={sortColumn}\r\n        onSort={onSort}\r\n        items={movies}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesTable;\r\n","import React from \"react\";\r\n\r\nconst SearchBox = ({ value, onSearch }) => {\r\n  return (\r\n    <div className=\"input-group mb-3\">\r\n      <input\r\n        onChange={(e) => onSearch(e.currentTarget.value)}\r\n        type=\"text\"\r\n        name=\"query\"\r\n        value={value}\r\n        className=\"form-control my-3\"\r\n        placeholder=\"Searh...\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBox;\r\n","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { deleteMovie, getMovies } from \"../services/movieService\";\r\nimport Pagination from \"./common/pagination\";\r\nimport { paginate } from \"../utils/paginate\";\r\nimport ListGroup from \"./common/listGroup\";\r\nimport { getGenres } from \"../services/genreService\";\r\nimport MoviesTable from \"./moviesTable\";\r\nimport SearchBox from \"./common/searchBar\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\n\r\nclass Movies extends Component {\r\n  state = {\r\n    movies: [],\r\n    genres: [],\r\n    currentPage: 1,\r\n    pageSize: 4,\r\n    selectedGenre: null,\r\n    sortColumn: { path: \"title\", order: \"asc\" },\r\n    searchQuery: \"\",\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const res = await getGenres();\r\n    const genres = [{ _id: \"\", name: \"All Genres\" }, ...res];\r\n    this.setState({ movies: await getMovies(), genres });\r\n  }\r\n\r\n  handleDelete = async (movie) => {\r\n    const originalMovies = this.state.movies;\r\n    const movies = originalMovies.filter((m) => m._id !== movie._id);\r\n    this.setState({ movies });\r\n\r\n    try {\r\n      await deleteMovie(movie._id);\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404) {\r\n        toast.error(\"movie not found\");\r\n      }\r\n      this.setState({ movies: originalMovies });\r\n    }\r\n  };\r\n\r\n  handleLike = (movie) => {\r\n    const movies = [...this.state.movies];\r\n    const ind = this.state.movies.indexOf(movie);\r\n    movies[ind] = { ...movie };\r\n    movies[ind].liked = !movie.liked;\r\n    this.setState({ movies });\r\n  };\r\n\r\n  handlePageChange = (page) => {\r\n    this.setState({ currentPage: page });\r\n  };\r\n\r\n  handleGenreSelect = (genre) => {\r\n    this.setState({\r\n      searchQuery: \"\",\r\n      selectedGenre: genre,\r\n      currentPage: 1,\r\n    });\r\n    console.log(this.state.searchQuery);\r\n  };\r\n\r\n  handleSort = (sortColumn) => {\r\n    this.setState({ sortColumn });\r\n  };\r\n\r\n  handleSearch = (searchQuery) => {\r\n    this.setState({\r\n      searchQuery,\r\n      selectedGenre: null,\r\n      currentPage: 1,\r\n    });\r\n  };\r\n\r\n  getPagedData = () => {\r\n    const {\r\n      pageSize,\r\n      currentPage,\r\n      movies: allMovies,\r\n      selectedGenre,\r\n      sortColumn,\r\n      searchQuery,\r\n    } = this.state;\r\n\r\n    let filtered = allMovies;\r\n\r\n    if (searchQuery) {\r\n      filtered = allMovies.filter((m) =>\r\n        m.title.toLowerCase().startsWith(searchQuery.toLowerCase())\r\n      );\r\n    } else if (selectedGenre) {\r\n      filtered =\r\n        selectedGenre && selectedGenre._id\r\n          ? allMovies.filter((m) => m.genre._id === selectedGenre._id)\r\n          : allMovies;\r\n    }\r\n\r\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\r\n\r\n    const movies = paginate(sorted, currentPage, pageSize);\r\n\r\n    return { totalCount: filtered.length, movies };\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      pageSize,\r\n      currentPage,\r\n      movies: allMovies,\r\n      selectedGenre,\r\n      genres,\r\n      sortColumn,\r\n      searchQuery,\r\n    } = this.state;\r\n\r\n    if (allMovies.length === 0) {\r\n      return (\r\n        <div>\r\n          <p>There are no movies in the database.</p>\r\n          {this.props.user && (\r\n            <Link to=\"/movies/new\" className=\"btn btn-primary\">\r\n              New Movie\r\n            </Link>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    const { totalCount, movies } = this.getPagedData();\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-4\">\r\n          <ListGroup\r\n            selectedItem={selectedGenre}\r\n            items={genres}\r\n            onItemSelect={(genre) => this.handleGenreSelect(genre)}\r\n          />\r\n        </div>\r\n        <div className=\"col\">\r\n          {this.props.user && (\r\n            <Link to=\"/movies/new\" className=\"btn btn-primary\">\r\n              New Movie\r\n            </Link>\r\n          )}\r\n          <div className=\"m-2\">\r\n            Showing {totalCount} movies in the database.\r\n          </div>\r\n          <SearchBox onSearch={this.handleSearch} value={searchQuery} />\r\n          <MoviesTable\r\n            movies={movies}\r\n            sortColumn={sortColumn}\r\n            onLike={this.handleLike}\r\n            onDelete={this.handleDelete}\r\n            onSort={this.handleSort}\r\n          />\r\n          <Pagination\r\n            itemsCount={totalCount}\r\n            pageSize={pageSize}\r\n            onPageChange={this.handlePageChange}\r\n            currentPage={currentPage}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Movies;\r\n","import React from \"react\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport \"bootstrap/js/src/collapse.js\";\r\n\r\nconst NavBar = ({ user }) => {\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n      <Link className=\"navbar-brand\" to=\"/\">\r\n        Vidly\r\n      </Link>\r\n      <button\r\n        className=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-toggle=\"collapse\"\r\n        data-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\"\r\n        aria-expanded=\"false\"\r\n        aria-label=\"Toggle navigation\"\r\n      >\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul className=\"navbar-nav\">\r\n          <li className=\"nav-item\">\r\n            <NavLink className=\"nav-link\" to=\"/movies\">\r\n              Movies\r\n            </NavLink>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <NavLink className=\"nav-link\" to=\"/customers\">\r\n              Customers\r\n            </NavLink>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <NavLink className=\"nav-link\" to=\"/rentals\">\r\n              Rentals\r\n            </NavLink>\r\n          </li>\r\n          {!user && (\r\n            <React.Fragment>\r\n              <li className=\"nav-item\">\r\n                <NavLink className=\"nav-link\" to=\"/login\">\r\n                  Login\r\n                </NavLink>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <NavLink className=\"nav-link\" to=\"/Register\">\r\n                  Register\r\n                </NavLink>\r\n              </li>\r\n            </React.Fragment>\r\n          )}\r\n          {user && (\r\n            <React.Fragment>\r\n              <li className=\"nav-item\">\r\n                <NavLink className=\"nav-link\" to=\"/profile\">\r\n                  {user.name}\r\n                </NavLink>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n                <NavLink className=\"nav-link\" to=\"/logout\">\r\n                  Logout\r\n                </NavLink>\r\n              </li>\r\n            </React.Fragment>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\n\r\nconst Customers = () => {\r\n  return <h1>Customers</h1>;\r\n};\r\n\r\nexport default Customers;\r\n","import React from \"react\";\r\n\r\nconst Rentals = () => {\r\n  return <h1>Rentals</h1>;\r\n};\r\n\r\nexport default Rentals;\r\n","import React from \"react\";\r\n\r\nconst NotFound = () => {\r\n  return <h1>Not Found</h1>;\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\n\r\nconst Input = ({ name, label, error, ...rest }) => {\r\n  return (\r\n    <div className=\"form-group\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <input {...rest} name={name} id={name} className=\"form-control\" />\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React from \"react\";\r\n\r\nconst Select = ({ name, onChange, value, label, items, error }) => {\r\n  return (\r\n    <div className=\"form-group\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <select\r\n        id={name}\r\n        name={name}\r\n        onChange={onChange}\r\n        value={value}\r\n        className=\"custom-select\"\r\n      >\r\n        <option value=\"\" />\r\n        {items.map((item) => (\r\n          <option key={item._id} value={item._id}>\r\n            {item.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import { Component } from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Input from \"./input\";\r\nimport Select from \"./select\";\r\n\r\nclass Form extends Component {\r\n  state = { data: {}, errors: {} };\r\n  validate = () => {\r\n    const options = {\r\n      abortEarly: false,\r\n    };\r\n\r\n    const { error } = Joi.validate(this.state.data, this.schema, options);\r\n\r\n    if (!error) return null;\r\n    const errors = {};\r\n    for (let item of error.details) errors[item.path[0]] = item.message;\r\n\r\n    return errors;\r\n  };\r\n\r\n  validateProperty = ({ name, value }) => {\r\n    const obj = { [name]: value };\r\n    const schema = { [name]: this.schema[name] };\r\n    const { error } = Joi.validate(obj, schema);\r\n    return error ? error.details[0].message : null;\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const errors = this.validate();\r\n    this.setState({ errors: errors || {} });\r\n\r\n    if (errors) return;\r\n    this.doSubmit();\r\n  };\r\n\r\n  handleInputChange = ({ currentTarget: input }) => {\r\n    const errors = { ...this.state.errors };\r\n    const errorMessage = this.validateProperty(input);\r\n    if (errorMessage) {\r\n      errors[input.name] = errorMessage;\r\n    } else delete errors[input.name];\r\n\r\n    const data = { ...this.state.data };\r\n    data[input.name] = input.value;\r\n    this.setState({ data, errors });\r\n  };\r\n\r\n  renderButton(label) {\r\n    return (\r\n      <button disabled={this.validate()} className=\"btn btn-primary\">\r\n        {label}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderInput(name, label, type = \"text\") {\r\n    const { data, errors } = this.state;\r\n    return (\r\n      <Input\r\n        type={type}\r\n        name={name}\r\n        onChange={this.handleInputChange}\r\n        value={data[name]}\r\n        label={label}\r\n        error={errors[name]}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderSelect(name, label, items) {\r\n    const { data, errors } = this.state;\r\n    return (\r\n      <Select\r\n        name={name}\r\n        value={data[name]}\r\n        onChange={this.handleInputChange}\r\n        label={label}\r\n        items={items}\r\n        error={errors[name]}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport { getGenres } from \"../services/genreService\";\r\nimport { getMovie, saveMovie } from \"../services/movieService\";\r\n\r\nclass MovieForm extends Form {\r\n  state = {\r\n    data: {\r\n      title: \"\",\r\n      genreId: \"\",\r\n      numberInStock: \"\",\r\n      dailyRentalRate: \"\",\r\n    },\r\n    genres: [],\r\n    errors: {},\r\n  };\r\n\r\n  schema = {\r\n    _id: Joi.string(),\r\n    title: Joi.string().required().label(\"Title\"),\r\n    genreId: Joi.string().required().label(\"Genre\"),\r\n    numberInStock: Joi.number()\r\n      .min(0)\r\n      .max(100)\r\n      .required()\r\n      .label(\"Number In Stock\"),\r\n    dailyRentalRate: Joi.number()\r\n      .min(0)\r\n      .max(10)\r\n      .required()\r\n      .label(\"Daily Rental Rate\"),\r\n  };\r\n\r\n  async populateGenre() {\r\n    const genres = await getGenres();\r\n    this.setState({ genres });\r\n  }\r\n\r\n  async populateMovie() {\r\n    const movieId = this.props.match.params.id;\r\n    if (movieId === \"new\") return;\r\n    try {\r\n      const movie = await getMovie(movieId);\r\n      this.setState({ data: this.mapToViewModel(movie) });\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404)\r\n        return this.props.history.replace(\"/not-found\");\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.populateGenre();\r\n    await this.populateMovie();\r\n  }\r\n\r\n  mapToViewModel(movie) {\r\n    return {\r\n      _id: movie._id,\r\n      title: movie.title,\r\n      genreId: movie.genre._id,\r\n      numberInStock: movie.numberInStock,\r\n      dailyRentalRate: movie.dailyRentalRate,\r\n    };\r\n  }\r\n\r\n  doSubmit = async () => {\r\n    //call the server\r\n    await saveMovie(this.state.data);\r\n    this.props.history.push(\"/movies\");\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Movie Form</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"title\", \"Title\")}\r\n          {this.renderSelect(\"genreId\", \"Genre\", this.state.genres)}\r\n          {this.renderInput(\"numberInStock\", \"Number In Stock\", \"number\")}\r\n          {this.renderInput(\"dailyRentalRate\", \"Daily Rental Rate\")}\r\n          {this.renderButton(\"Save\")}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieForm;\r\n","import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport { getCurrentUser, login } from \"../services/authService\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass LoginForm extends Form {\r\n  state = {\r\n    data: {\r\n      username: \"\",\r\n      password: \"\",\r\n    },\r\n    errors: {},\r\n  };\r\n\r\n  schema = {\r\n    username: Joi.string().required().label(\"Username\"),\r\n    password: Joi.string().required().label(\"Password\"),\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    try {\r\n      await login(this.state.data);\r\n      const { state } = this.props.location;\r\n      window.location = state ? state.from.pathname : \"/\";\r\n    } catch (ex) {\r\n      if (\r\n        ex.response &&\r\n        (ex.response.status === 400 || ex.response.status === 404)\r\n      ) {\r\n        const errors = { ...this.state.errors };\r\n        errors.username = ex.response.data;\r\n        this.setState({ errors });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (getCurrentUser()) return <Redirect to=\"/\" />;\r\n    return (\r\n      <div>\r\n        <h1>Login</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"username\", \"Username\")}\r\n          {this.renderInput(\"password\", \"Password\", \"password\")}\r\n          {this.renderButton(\"Login\")}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import http from \"./httpService\";\r\n\r\nconst apiEndpoint = \"/users\";\r\n\r\nexport function register(user) {\r\n  return http.post(apiEndpoint, {\r\n    email: user.username,\r\n    password: user.password,\r\n    name: user.name,\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport * as userService from \"../services/userService\";\r\n\r\nclass RegisterForm extends Form {\r\n  state = {\r\n    data: {\r\n      username: \"\",\r\n      password: \"\",\r\n      name: \"\",\r\n    },\r\n    errors: {},\r\n  };\r\n\r\n  schema = {\r\n    username: Joi.string().email().required().label(\"Username\"),\r\n    password: Joi.string().min(5).required().label(\"Password\"),\r\n    name: Joi.string().required().label(\"Name\"),\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    try {\r\n      await userService.register(this.state.data);\r\n      window.location = \"/login\";\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        const errors = { ...this.state.errors };\r\n        errors.username = ex.response.data;\r\n        this.setState({ errors });\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Register</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput(\"username\", \"Username\", \"email\")}\r\n          {this.renderInput(\"password\", \"Password\", \"password\")}\r\n          {this.renderInput(\"name\", \"Name\")}\r\n          {this.renderButton(\"Register\")}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegisterForm;\r\n","import React, { Component } from \"react\";\r\nimport { logout } from \"../services/authService\";\r\n\r\nclass Logout extends Component {\r\n  state = {};\r\n  componentDidMount() {\r\n    logout();\r\n    window.location = \"/\";\r\n  }\r\n  render() {\r\n    return <p>Logging out...</p>;\r\n  }\r\n}\r\n\r\nexport default Logout;\r\n","import React from \"react\";\r\n\r\nconst Profile = ({ user }) => {\r\n  return <h1>Hello {user.name}</h1>;\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { getCurrentUser } from \"../../services/authService\";\r\n\r\nconst ProtectedRoute = ({ path, component: Component, render, ...rest }) => {\r\n  return (\r\n    <Route\r\n      path={path}\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!getCurrentUser())\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: { from: props.location },\r\n              }}\r\n            />\r\n          );\r\n        else return Component ? <Component {...props} /> : render(props);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { Component } from \"react\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport Movies from \"./components/movies\";\r\nimport NavBar from \"./components/common/navBar\";\r\nimport Customers from \"./components/customers\";\r\nimport Rentals from \"./components/rentals\";\r\nimport NotFound from \"./components/common/notFound\";\r\nimport MovieForm from \"./components/movieForm\";\r\nimport LoginForm from \"./components/loginForm\";\r\nimport RegisterForm from \"./components/registerForm\";\r\nimport Logout from \"./components/logout\";\r\nimport { getCurrentUser } from \"./services/authService\";\r\nimport Profile from \"./components/profile\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport ProtectedRoute from \"./components/common/protectedRoute\";\r\n\r\nclass App extends Component {\r\n  state = {};\r\n  componentDidMount() {\r\n    const user = getCurrentUser();\r\n    this.setState({ user });\r\n  }\r\n  render() {\r\n    const { user } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <ToastContainer />\r\n        <NavBar user={user} />\r\n        <main className=\"container\">\r\n          <Switch>\r\n            <ProtectedRoute path=\"/movies/:id\" component={MovieForm} />\r\n            <Route path=\"/login\" component={LoginForm} />\r\n            <Route path=\"/profile\" render={() => <Profile user={user} />} />\r\n            <Route path=\"/logout\" component={Logout} />\r\n            <Route path=\"/register\" component={RegisterForm} />\r\n            <Route\r\n              path=\"/movies\"\r\n              render={(props) => <Movies {...props} user={user} />}\r\n            />\r\n            <Route path=\"/customers\" component={Customers} />\r\n            <Route path=\"/rentals\" component={Rentals} />\r\n            <Redirect exact from=\"/\" to=\"/movies\" />\r\n            <Route path=\"/not-found\" component={NotFound} />\r\n            <Redirect to=\"/not-found\" />\r\n          </Switch>\r\n        </main>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"font-awesome/css/font-awesome.css\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { init } from \"./services/logService\";\r\n\r\ninit();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}